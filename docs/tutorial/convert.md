# Converting Model to Different Frameworks

modelci provides model conversion between different serving engine based members. These APIs will save the converted model in the given `saved_path` and return success or failure status of the conversion. We restrict to use the standard `saved_path` generated by `modelci.hub.utils.generate_path(...)` or path according to the rules (See [Tricks with Model Saved Path](./register.md#tricks-with-model-saved-path)). This path format can make your life easier.


### 1. TorchScript Conversion

```python
from modelci.hub.converter import TorchScriptConverter

torch_module = ...
saved_path = ...

TorchScriptConverter.from_torch_module(torch_module, saved_path)
```

### 2. TensorFlow Serving Conversion

```python
from modelci.hub.converter import TFSConverter

tf_module = ...
saved_path = ...

TFSConverter.from_tf_model(tf_module, saved_path)
```

### 3. ONNX Conversion

```python
from modelci.hub.converter import ONNXConverter

torch_module = ...
saved_path = ...
input_shape = ...
batch_size = ...

ONNXConverter.from_torch_module(torch_module, saved_path, input_shape, batch_size)
```

### 4. TRT Conversion

#### From TF Savedmodel to TF-TRT

```python
from modelci.hub.converter import TRTConverter
from modelci.persistence.bo import IOShape

tf_path = ...
trt_path = ...
inputs = [IOShape([...], dtype=..., format=...), ...]
outputs = [IOShape([...], dtype=..., format=...), ...]

TRTConverter.from_saved_model(tf_path, trt_path, inputs=inputs, outputs=outputs)
```

#### From ONNX to TRT

```python
from modelci.hub.converter import TRTConverter
from modelci.persistence.bo import IOShape

onnx_path = ...
save_path = ...
inputs = [IOShape([...], dtype=...), ...]
outputs = [IOShape([...], dtype=...), ...]

TRTConverter.from_onnx(onnx_path, save_path, inputs=inputs, outputs=outputs)
```